@page
@model SolucoesDefeitos.Pesentation.RazorPages.Pages.Manufacturer.ListModel
@{
}

@if(TempData["Error"] != null)
{
    <div class="alert alert-danger d-flex align-items-center" role="alert">
        <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill" /></svg>
        <div>
            @(TempData["Error"])
        </div>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}
else if (TempData["Success"] != null)
{
    <div class="alert alert-success d-flex align-items-center" role="alert">
        <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill" /></svg>
        <div>
            @(TempData["Success"])
        </div>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

<h2>Fabricantes</h2>
<div>
    <a class="btn btn-primary" asp-page="./Form">Novo</a>
</div>
<form asp-page="./List" method="get"> 
    <div>
        <p>
            Filtar por nome:
            <input type="text" name="ManufacturerNameFilter" value="@Model.ManufacturerNameFilter" />
            <input type="submit" value="Filtrar" class="btn btn-primary"/> |
            <a asp-page="./List">Limpar filtro</a>
        </p>
    </div>
</form>
<table class="table">
    <thead>
        <tr>
            <th scope="col" class="options-column">Ações</th>
            <th scope="col">Nome</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var manufacturer in Model.ViewModel.Data)
        {
            <tr>
                <th scope="row">
                    <div class="btn-group">
                        <button type="button" class="btn btn-outline-primary dropdown-toggle" data-bs-toggle="dropdown">
                            Opções
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" asp-page="./Form" asp-route-manufacturerId="@manufacturer.ManufacturerId">Alterar</a></li>
                            <li><a class="dropdown-item" href="#">Excluir</a></li>
                        </ul>
                    </div>
                </th>
                <td>@manufacturer.Name</td>
            </tr>
        }
    </tbody>
</table>
<nav aria-label="Paginação da listagem de fabricantes">
    <ul class="pagination">
        @if(Model.ViewModel.CurrentPage > 1)
        {
            <li class="page-item"><a class="page-link" href="/Manufacturer/List?page=@(Model.ViewModel.CurrentPage-1)">Anterior</a></li>
        }
        @for(var pagina = 1; pagina <= Model.ViewModel.TotalPages; pagina++)
        {
            <li class="page-item"><a class="page-link" href="/"></a></li>
        }
    </ul>
</nav>

